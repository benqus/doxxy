{"version":3,"sources":["getElementPath.js","events.js","doxxy.js"],"names":["discoverPath","p","target","a","parentNode","push","window","e","composedPath","path","_getController","ctrl","fn","controller","controllers","get","_findSubscriberInPath","attribute","type","i","length","document","dataset","_listener","handler","split","call","console","error","method","addEventListener","Map","events","forEach","subscribe","name","set"],"mappings":";AAiBC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAfD,IAAMA,EAAe,SAAgB,GAG1BC,IAHaC,IAAAA,EAAAA,EAAAA,OACdC,EAAI,CAACD,GACPD,EAAIC,EAAOE,WACRH,GACHE,EAAEE,KAAKJ,GACPA,EAAIA,EAAEG,WAGHD,OADPA,EAAEE,KAAKC,QACAH,GAGI,EAAA,SAACI,GACRA,OAAAA,EAAEC,aAAqBD,EAAEC,eACzBD,EAAEE,KAAaF,EAAEE,KACdT,EAAaO,IACvB,QAAA,QAAA;;ACXc,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACX,QACA,QACA,OACA,eACA,SACA,SACA,UACA,QACA,OACA,OACA,UACA,QACA,QACA,WACA,WACA,WACA,iBACA,kBACA,eACA,qBACA,kBACA,mBACA,gBACA,gBACA,QACA,SACA,cACA,aACA,mBACA,oBACA,iBACA,mBACA,kBACA,SACA,SACA,MACA,OACA,QACA,UACA,WACA,QACA,WACA,QACA,cACA,WACA,YACA,aACA,aACA,YACA,YACA,WACA,UACA,oBACA,mBACA,SACA,QACA,OACA,UACA,YACA,YACA,YACA,WACA,OACA,eACA,UACA,iBACA,WACA,iBACA,UACA,QACA,aACA,iBACA,QACA,OACA,UACA,aACA,SACA,UACA,UACA,UACA,aACA,eACA,UACA,QACA,QACA,OACA,UACA,YACA,WACA,UACA,QACA,oBACA,gBACA,mBACA,sBACA,sBACA,iBACA,yBACA,QACA,QACA,QACA,aACA,kBACA,eACA,qBACA,iBACA,eACA,eACA,WACA,aACA,cACA,eACA,aACA,UACA,OACA,WACA,UACA,iBACA,SACA,iBACA,qBACA,QACA,QACA,WACA,WACA,iBACA,mBACA,oBACA,cACA,OACA,MACA,WACA,eACA,eACA,oBACA,wBACA,cACA,0BACA,kBACA,2BACA,mBACA,wBACA,aACA,cACA,kBACA,8BACA,iBACA,6BACA,qBACA,OACA,UACA,YACA,YACA,WACA,YACA,OACA,iBACA,UACA,MACA,MACA,QACA,QACA,WACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,UACA,WACA,mBACA,kBACA,mBACA,sBACA,oBACA,aACA,qBACA,QACA,UACA,UACA,WACA,QACA,iBACA,cACA,OACA,OACA,aACA,iBACA,UACA,YACA,OACA,UACA,UACA,UACA,UACA,eACA,UACA,YACA,aACA,aACA,YACA,WACA,YACA,UACA,UACA,oBACA,UACA,SACA,OACA,OACA,oBACA,WACA,WACA,QACA,QACA,QACA,gBACA,cACA,eACA,eACA,oBACA,mBACA,cACA,aACA,cACA,YACA,OACA,UACA,WACA,WACA,OACA,yBACA,aACA,mBACA,cACA,QACA,SACA,2BACA,SACA,SACA,SACA,SACA,UACA,SACA,cACA,kBACA,OACA,aACA,WACA,aACA,YACA,cACA,UACA,QACA,QACA,UACA,SACA,UACA,UACA,WACA,WACA,UACA,YACA,YACA,YACA,UACA,UACA,aACA,cACA,WACA,YACA,aACA,gBACA,SACA,gBACA,gBACA,gBACA,gBACA,mBACA,eACA,UACA,QACA,qBACA,sBACA,sBACA,kBACA,SACA,uBACA,gBACA,aACA,YACA,iBACA,WACA,WACA,cACA,mBACA,gBACA,YACA,aACA,oBACA,kBACA,yBACA,wBACA,gCACA,8BACA,kBACA,wBACA,+BACA,kBACA,uBACA,uBACA,uBACA,2BACA,oBACA,sBACA,2BACA,uBACA,uBACA,oBACA,uBACA,mBACA,mBACA,8BACA,6BACA,2BACA,kCACA,4BACA,wBACA,wCACA,6BACA,uBACA,qBACA,sBACA,iBACA,yBACA,gBACA,eACA,eACA,aACA,WACA,OACA,eACA,wBACA,aACA,YACA,UACA,WACA,eACA,gBACA,UACA,QACA,OACA,UACA,WACA,WACA,WACA,OACA,cACA,eACA,WACA,mBACA,mBACA,aACA,gBACA,aACA,aACA,YACA,iBACA,eACA,cACA,gBACA,6BACA,iBACA,YACA,sBACA,QACA,UACA,gBACA,oBACA,sBACA,cACA,cACA,eACA,aACA,mBACA,cACA,kBACA,yBACA,0BACA,oBACA,wBACA,yBACA,mBACA,gBACA,qBACA,mBACA,gBACA,kBACA,mBACA,iBACA,kBACA,eACA,iBACA,eACA,iBACA,yBACA,uBACA,kBACA,wBACA,cACA,aACA,aACA,iBACA,0BACA,kBACA,eACA,iBACA,gBACA,qBACA,oBACA,UACA,WACA,YACA,UACA,UACA,YACA,cACA,uBACA,qBACA,6BAjbW,QAAA,QAAA;;ACyCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA/Cf,IAAA,EAAA,EAAA,QAAA,qBACA,EAAA,EAAA,QAAA,aA8Ce,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GA5Cf,IAAMG,EAAiB,SAACC,EAAMC,GACpBC,IAAAA,EAAaC,EAAYC,IAAIJ,IAAS,GACpCC,OAAAA,EAAKC,EAAWD,GAAMC,GAI5BG,EAAwB,SAACT,GAGtB,IAFCE,IAAAA,GAAO,EAAeF,EAAAA,SAAAA,GACtBU,EAAqBV,SAAAA,OAAAA,EAAEW,MACpBC,EAAI,EAAGA,EAAIV,EAAKW,QACjBX,EAAKU,KAAOE,SADaF,IAAK,CAG1BG,IAAAA,EAAYb,EAAKU,GAAjBG,QACJA,GAAAA,GAAWA,EAAQL,GACZK,OAAAA,EAAQL,GAGhB,OAAA,MAGLM,EAAY,SAAAhB,GACRiB,IAAAA,EAAUR,EAAsBT,GAClC,GAACiB,EAAD,CAEEZ,IAAAA,EAAKF,EAAA,WAAkBc,EAAAA,EAAAA,EAAQC,MAAM,OACvC,GAAc,mBAAPb,EAAmB,OAAOA,EAAGc,KAAKnB,EAAEL,OAAQK,GAEvDoB,QAAQC,MAAoCJ,8BAAAA,OAAAA,EAAgBjB,UAAAA,OAAAA,EAAEW,SAG5DW,EAA+C,mBAA9BR,SAASS,iBAAkC,mBAAqB,cACjFhB,EAAc,IAAIiB,IAExBC,EAAOC,QAAAA,QAAQ,SAAA1B,GAAKc,OAAAA,SAASQ,GAAQtB,EAAGgB,KAOxC,IAAMW,EAAY,SAACC,EAAMtB,GACrBC,EAAYsB,IAAID,EAAMtB,IAGX,EAAA,CAAEqB,UAAAA,GAAF,QAAA,QAAA","file":"doxxy.js","sourceRoot":"../lib","sourcesContent":["\n// IE and EDGE - suuuuuuucks but what can you do... -_-\nconst discoverPath = ({ target }) => {\n    const a = [target];\n    let p = target.parentNode;\n    while (p) {\n        a.push(p);\n        p = p.parentNode;\n    }\n    a.push(window);\n    return a;\n};\n\nexport default (e) => {\n    if (e.composedPath) return e.composedPath();\n    if (e.path) return e.path;\n    return discoverPath(e);\n};\n","// TODO not all events are needed - make this module configurable somehow\n\n/**\n * All events from MDN\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/Events}\n */\nexport default [\n    \"error\",\n    \"abort\",\n    \"load\",\n    \"beforeunload\",\n    \"unload\",\n    \"online\",\n    \"offline\",\n    \"focus\",\n    \"blur\",\n    \"open\",\n    \"message\",\n    \"error\",\n    \"close\",\n    \"pagehide\",\n    \"pageshow\",\n    \"popstate\",\n    \"animationstart\",\n    \"animationcancel\",\n    \"animationend\",\n    \"animationiteration\",\n    \"transitionstart\",\n    \"transitioncancel\",\n    \"transitionend\",\n    \"transitionrun\",\n    \"reset\",\n    \"submit\",\n    \"beforeprint\",\n    \"afterprint\",\n    \"compositionstart\",\n    \"compositionupdate\",\n    \"compositionend\",\n    \"fullscreenchange\",\n    \"fullscreenerror\",\n    \"resize\",\n    \"scroll\",\n    \"cut\",\n    \"copy\",\n    \"paste\",\n    \"keydown\",\n    \"keypress\",\n    \"keyup\",\n    \"auxclick\",\n    \"click\",\n    \"contextmenu\",\n    \"dblclick\",\n    \"mousedown\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"mousemove\",\n    \"mouseover\",\n    \"mouseout\",\n    \"mouseup\",\n    \"pointerlockchange\",\n    \"pointerlockerror\",\n    \"select\",\n    \"wheel\",\n    \"drag\",\n    \"dragend\",\n    \"dragenter\",\n    \"dragstart\",\n    \"dragleave\",\n    \"dragover\",\n    \"drop\",\n    \"audioprocess\",\n    \"canplay\",\n    \"canplaythrough\",\n    \"complete\",\n    \"durationchange\",\n    \"emptied\",\n    \"ended\",\n    \"loadeddata\",\n    \"loadedmetadata\",\n    \"pause\",\n    \"play\",\n    \"playing\",\n    \"ratechange\",\n    \"seeked\",\n    \"seeking\",\n    \"stalled\",\n    \"suspend\",\n    \"timeupdate\",\n    \"volumechange\",\n    \"waiting\",\n    \"abort\",\n    \"error\",\n    \"load\",\n    \"loadend\",\n    \"loadstart\",\n    \"progress\",\n    \"timeout\",\n    \"abort\",\n    \"vrdisplayactivate\",\n    \"vrdisplayblur\",\n    \"vrdisplayconnect\",\n    \"vrdisplaydeactivate\",\n    \"vrdisplaydisconnect\",\n    \"vrdisplayfocus\",\n    \"vrdisplaypresentchange\",\n    \"abort\",\n    \"abort\",\n    \"abort\",\n    \"afterprint\",\n    \"animationcancel\",\n    \"animationend\",\n    \"animationiteration\",\n    \"animationstart\",\n    \"appinstalled\",\n    \"audioprocess\",\n    \"audioend\",\n    \"audiostart\",\n    \"beforeprint\",\n    \"beforeunload\",\n    \"beginEvent\",\n    \"blocked\",\n    \"blur\",\n    \"boundary\",\n    \"canplay\",\n    \"canplaythrough\",\n    \"change\",\n    \"chargingchange\",\n    \"chargingtimechange\",\n    \"click\",\n    \"close\",\n    \"complete\",\n    \"complete\",\n    \"compositionend\",\n    \"compositionstart\",\n    \"compositionupdate\",\n    \"contextmenu\",\n    \"copy\",\n    \"cut\",\n    \"dblclick\",\n    \"devicechange\",\n    \"devicemotion\",\n    \"deviceorientation\",\n    \"dischargingtimechange\",\n    \"DOMActivate\",\n    \"DOMAttributeNameChanged\",\n    \"DOMAttrModified\",\n    \"DOMCharacterDataModified\",\n    \"DOMContentLoaded\",\n    \"DOMElementNameChanged\",\n    \"DOMFocusIn\",\n    \"DOMFocusOut\",\n    \"DOMNodeInserted\",\n    \"DOMNodeInsertedIntoDocument\",\n    \"DOMNodeRemoved\",\n    \"DOMNodeRemovedFromDocument\",\n    \"DOMSubtreeModified\",\n    \"drag\",\n    \"dragend\",\n    \"dragenter\",\n    \"dragleave\",\n    \"dragover\",\n    \"dragstart\",\n    \"drop\",\n    \"durationchange\",\n    \"emptied\",\n    \"end\",\n    \"end\",\n    \"ended\",\n    \"ended\",\n    \"endEvent\",\n    \"error\",\n    \"error\",\n    \"error\",\n    \"error\",\n    \"error\",\n    \"error\",\n    \"error\",\n    \"focus\",\n    \"focusin\",\n    \"focusout\",\n    \"fullscreenchange\",\n    \"fullscreenerror\",\n    \"gamepadconnected\",\n    \"gamepaddisconnected\",\n    \"gotpointercapture\",\n    \"hashchange\",\n    \"lostpointercapture\",\n    \"input\",\n    \"invalid\",\n    \"keydown\",\n    \"keypress\",\n    \"keyup\",\n    \"languagechange\",\n    \"levelchange\",\n    \"load\",\n    \"load\",\n    \"loadeddata\",\n    \"loadedmetadata\",\n    \"loadend\",\n    \"loadstart\",\n    \"mark\",\n    \"message\",\n    \"message\",\n    \"message\",\n    \"message\",\n    \"messageerror\",\n    \"message\",\n    \"mousedown\",\n    \"mouseenter\",\n    \"mouseleave\",\n    \"mousemove\",\n    \"mouseout\",\n    \"mouseover\",\n    \"mouseup\",\n    \"nomatch\",\n    \"notificationclick\",\n    \"offline\",\n    \"online\",\n    \"open\",\n    \"open\",\n    \"orientationchange\",\n    \"pagehide\",\n    \"pageshow\",\n    \"paste\",\n    \"pause\",\n    \"pause\",\n    \"pointercancel\",\n    \"pointerdown\",\n    \"pointerenter\",\n    \"pointerleave\",\n    \"pointerlockchange\",\n    \"pointerlockerror\",\n    \"pointermove\",\n    \"pointerout\",\n    \"pointerover\",\n    \"pointerup\",\n    \"play\",\n    \"playing\",\n    \"popstate\",\n    \"progress\",\n    \"push\",\n    \"pushsubscriptionchange\",\n    \"ratechange\",\n    \"readystatechange\",\n    \"repeatEvent\",\n    \"reset\",\n    \"resize\",\n    \"resourcetimingbufferfull\",\n    \"result\",\n    \"resume\",\n    \"scroll\",\n    \"seeked\",\n    \"seeking\",\n    \"select\",\n    \"selectstart\",\n    \"selectionchange\",\n    \"show\",\n    \"slotchange\",\n    \"soundend\",\n    \"soundstart\",\n    \"speechend\",\n    \"speechstart\",\n    \"stalled\",\n    \"start\",\n    \"start\",\n    \"storage\",\n    \"submit\",\n    \"success\",\n    \"suspend\",\n    \"SVGAbort\",\n    \"SVGError\",\n    \"SVGLoad\",\n    \"SVGResize\",\n    \"SVGScroll\",\n    \"SVGUnload\",\n    \"SVGZoom\",\n    \"timeout\",\n    \"timeupdate\",\n    \"touchcancel\",\n    \"touchend\",\n    \"touchmove\",\n    \"touchstart\",\n    \"transitionend\",\n    \"unload\",\n    \"upgradeneeded\",\n    \"userproximity\",\n    \"voiceschanged\",\n    \"versionchange\",\n    \"visibilitychange\",\n    \"volumechange\",\n    \"waiting\",\n    \"wheel\",\n    \"afterscriptexecute\",\n    \"beforescriptexecute\",\n    \"beforeinstallprompt\",\n    \"cardstatechange\",\n    \"change\",\n    \"connectionInfoUpdate\",\n    \"cfstatechange\",\n    \"datachange\",\n    \"dataerror\",\n    \"DOMMouseScroll\",\n    \"dragdrop\",\n    \"dragexit\",\n    \"draggesture\",\n    \"icccardlockerror\",\n    \"iccinfochange\",\n    \"localized\",\n    \"mousewheel\",\n    \"MozAudioAvailable\",\n    \"MozBeforeResize\",\n    \"mozbrowseractivitydone\",\n    \"mozbrowserasyncscroll\",\n    \"mozbrowseraudioplaybackchange\",\n    \"mozbrowsercaretstatechanged\",\n    \"mozbrowserclose\",\n    \"mozbrowsercontextmenu\",\n    \"mozbrowserdocumentfirstpaint\",\n    \"mozbrowsererror\",\n    \"mozbrowserfindchange\",\n    \"mozbrowserfirstpaint\",\n    \"mozbrowsericonchange\",\n    \"mozbrowserlocationchange\",\n    \"mozbrowserloadend\",\n    \"mozbrowserloadstart\",\n    \"mozbrowsermanifestchange\",\n    \"mozbrowsermetachange\",\n    \"mozbrowseropensearch\",\n    \"mozbrowseropentab\",\n    \"mozbrowseropenwindow\",\n    \"mozbrowserresize\",\n    \"mozbrowserscroll\",\n    \"mozbrowserscrollareachanged\",\n    \"mozbrowserscrollviewchange\",\n    \"mozbrowsersecuritychange\",\n    \"mozbrowserselectionstatechanged\",\n    \"mozbrowsershowmodalprompt\",\n    \"mozbrowsertitlechange\",\n    \"mozbrowserusernameandpasswordrequired\",\n    \"mozbrowservisibilitychange\",\n    \"MozGamepadButtonDown\",\n    \"MozGamepadButtonUp\",\n    \"MozMousePixelScroll\",\n    \"MozOrientation\",\n    \"MozScrolledAreaChanged\",\n    \"moztimechange\",\n    \"MozTouchDown\",\n    \"MozTouchMove\",\n    \"MozTouchUp\",\n    \"alerting\",\n    \"busy\",\n    \"callschanged\",\n    \"onconnected connected\",\n    \"connecting\",\n    \"delivered\",\n    \"dialing\",\n    \"disabled\",\n    \"disconnected\",\n    \"disconnecting\",\n    \"enabled\",\n    \"error\",\n    \"held\",\n    \"holding\",\n    \"incoming\",\n    \"received\",\n    \"resuming\",\n    \"sent\",\n    \"statechange\",\n    \"statuschange\",\n    \"overflow\",\n    \"smartcard-insert\",\n    \"smartcard-remove\",\n    \"stkcommand\",\n    \"stksessionend\",\n    \"touchenter\",\n    \"touchleave\",\n    \"underflow\",\n    \"uploadprogress\",\n    \"ussdreceived\",\n    \"voicechange\",\n    \"msContentZoom\",\n    \"MSManipulationStateChanged\",\n    \"MSPointerHover\",\n    \"broadcast\",\n    \"CheckboxStateChange\",\n    \"close\",\n    \"command\",\n    \"commandupdate\",\n    \"DOMMenuItemActive\",\n    \"DOMMenuItemInactive\",\n    \"popuphidden\",\n    \"popuphiding\",\n    \"popupshowing\",\n    \"popupshown\",\n    \"RadioStateChange\",\n    \"ValueChange\",\n    \"MozSwipeGesture\",\n    \"MozMagnifyGestureStart\",\n    \"MozMagnifyGestureUpdate\",\n    \"MozMagnifyGesture\",\n    \"MozRotateGestureStart\",\n    \"MozRotateGestureUpdate\",\n    \"MozRotateGesture\",\n    \"MozTapGesture\",\n    \"MozPressTapGesture\",\n    \"MozEdgeUIGesture\",\n    \"MozAfterPaint\",\n    \"DOMPopupBlocked\",\n    \"DOMWindowCreated\",\n    \"DOMWindowClose\",\n    \"DOMTitleChanged\",\n    \"DOMLinkAdded\",\n    \"DOMLinkRemoved\",\n    \"DOMMetaAdded\",\n    \"DOMMetaRemoved\",\n    \"DOMWillOpenModalDialog\",\n    \"DOMModalDialogClosed\",\n    \"DOMAutoComplete\",\n    \"DOMFrameContentLoaded\",\n    \"AlertActive\",\n    \"AlertClose\",\n    \"fullscreen\",\n    \"sizemodechange\",\n    \"MozEnteredDomFullscreen\",\n    \"SSWindowClosing\",\n    \"SSTabClosing\",\n    \"SSTabRestoring\",\n    \"SSTabRestored\",\n    \"SSWindowStateReady\",\n    \"SSWindowStateBusy\",\n    \"TabOpen\",\n    \"TabClose\",\n    \"TabSelect\",\n    \"TabShow\",\n    \"TabHide\",\n    \"TabPinned\",\n    \"TabUnpinned\",\n    \"CssRuleViewRefreshed\",\n    \"CssRuleViewChanged\",\n    \"CssRuleViewCSSLinkClicked\"\n];","import getElementPath from \"./getElementPath\";\nimport events from \"./events\";\n\nconst _getController = (ctrl, fn) => {\n    const controller = controllers.get(ctrl) || {};\n    return (fn ? controller[fn] : controller);\n};\n\n// Find first listener Node\nconst _findSubscriberInPath = (e) => {\n    const path = getElementPath(e);\n    const attribute = `event:${e.type}`;\n    for (let i = 0; i < path.length; i++) {\n        if (path[i] === document) break;\n\n        const { dataset } = path[i];\n        if (dataset && dataset[attribute]) {\n            return dataset[attribute];\n        }\n    }\n    return null;\n};\n\nconst _listener = e => {\n    const handler = _findSubscriberInPath(e);\n    if (!handler) return;\n\n    const fn = _getController(...handler.split('.'));\n    if (typeof fn === 'function') return fn.call(e.target, e);\n\n    console.error(`Cannot find event handler \"${handler}\" for ${e.type}`);\n};\n\nconst method = (typeof document.addEventListener === 'function' ? 'addEventListener' : 'attachEvent');\nconst controllers = new Map();\n\nevents.forEach(e => document[method](e, _listener));\n\n/**\n * add an event handler\n * @param {string} name\n * @param {function|object} controller\n */\nconst subscribe = (name, controller) => {\n    controllers.set(name, controller);\n};\n\nexport default { subscribe };\n"]}